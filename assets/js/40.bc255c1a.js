(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{355:function(e,t,a){"use strict";a.r(t);var r=a(7),s=Object(r.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"文件上传与下载"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#文件上传与下载"}},[e._v("#")]),e._v(" 文件上传与下载")]),e._v(" "),t("h2",{attrs:{id:"文件上传"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#文件上传"}},[e._v("#")]),e._v(" 文件上传")]),e._v(" "),t("h3",{attrs:{id:"注意点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#注意点"}},[e._v("#")]),e._v(" 注意点")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("post")]),e._v("请求")]),e._v(" "),t("li",[t("code",[e._v("encType")]),e._v("属性必须为"),t("code",[e._v("multipart/form-data")]),e._v(",这表示提交的数据，以多段的形式进行拼接，如何以二进制流的形式发送给服务器")])]),e._v(" "),t("h3",{attrs:{id:"common-fileupload包的常用api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#common-fileupload包的常用api"}},[e._v("#")]),e._v(" common-fileupload包的常用API")]),e._v(" "),t("h4",{attrs:{id:"常用类"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用类"}},[e._v("#")]),e._v(" 常用类")]),e._v(" "),t("h5",{attrs:{id:"serveltfileupload"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#serveltfileupload"}},[e._v("#")]),e._v(" ServeltFileUpload")]),e._v(" "),t("p",[e._v("用于解析上传的数据")]),e._v(" "),t("h5",{attrs:{id:"fileitem"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fileitem"}},[e._v("#")]),e._v(" FileItem")]),e._v(" "),t("p",[e._v("表示每个表单项")]),e._v(" "),t("h4",{attrs:{id:"方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方法"}},[e._v("#")]),e._v(" 方法")]),e._v(" "),t("h5",{attrs:{id:"boolean-servletfileupload-ismultipartcontent-httpserveltrequest-request"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#boolean-servletfileupload-ismultipartcontent-httpserveltrequest-request"}},[e._v("#")]),e._v(" boolean ServletFileUpload.isMultipartContent(HttpServeltRequest request)")]),e._v(" "),t("p",[e._v("判断当前上传的数据格式是否是多段的格式")]),e._v(" "),t("h5",{attrs:{id:"public-list-fileitem-parserequest-httpserveltrequest-request"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#public-list-fileitem-parserequest-httpserveltrequest-request"}},[e._v("#")]),e._v(" public List"),t("code",[e._v("<FileItem>")]),e._v(" parseRequest(HttpServeltRequest request)")]),e._v(" "),t("p",[e._v("解析上传的数据")]),e._v(" "),t("h5",{attrs:{id:"boolean-fileitem-isformfield"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#boolean-fileitem-isformfield"}},[e._v("#")]),e._v(" boolean FileItem.isFormField()")]),e._v(" "),t("p",[e._v("判断当前这个表单项，是否是普通的表单项。还是上传的文件类型")]),e._v(" "),t("p",[t("code",[e._v("true")]),e._v("表示普通类型的表单项")]),e._v(" "),t("p",[t("code",[e._v("false")]),e._v("表示上传的文件类型")]),e._v(" "),t("h5",{attrs:{id:"boolean-fileitem-getfieldname"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#boolean-fileitem-getfieldname"}},[e._v("#")]),e._v(" boolean FileItem.getFieldName()")]),e._v(" "),t("p",[e._v("获取表单项的"),t("code",[e._v("name")]),e._v("属性值")]),e._v(" "),t("h5",{attrs:{id:"string-fileitem-getstring"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#string-fileitem-getstring"}},[e._v("#")]),e._v(" String FileItem.getString()")]),e._v(" "),t("p",[e._v("获取当前表单项的值")]),e._v(" "),t("h5",{attrs:{id:"string-fileitem-getname"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#string-fileitem-getname"}},[e._v("#")]),e._v(" String FileItem.getName()")]),e._v(" "),t("p",[e._v("获取上传的文件名")]),e._v(" "),t("h5",{attrs:{id:"void-fileitem-write-file"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#void-fileitem-write-file"}},[e._v("#")]),e._v(" void FileItem.write(file)")]),e._v(" "),t("p",[e._v("将上传的文件写到参数"),t("code",[e._v("file")]),e._v("所指向硬盘位置")]),e._v(" "),t("h2",{attrs:{id:"文件下载"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#文件下载"}},[e._v("#")]),e._v(" 文件下载")]),e._v(" "),t("h3",{attrs:{id:"常用api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用api"}},[e._v("#")]),e._v(" 常用API")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("response.getOutStream()")])]),e._v(" "),t("li",[t("code",[e._v("servletContext.getResourceAsStream()")])]),e._v(" "),t("li",[t("code",[e._v("servletContext.getMimeType()")])]),e._v(" "),t("li",[t("code",[e._v("response.setContentType()")])])]),e._v(" "),t("blockquote",[t("p",[t("code",[e._v('response.setHeader("Content-Disposition","attachment;fileName=1.jpg")')])]),e._v(" "),t("p",[e._v("这个响应头告诉浏览器，这是需要下载的，"),t("code",[e._v("attachment")]),e._v("表示附件，也就是下载的一个文件。"),t("code",[e._v("fileName")]),e._v("表示文件名")])]),e._v(" "),t("h3",{attrs:{id:"中文乱码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#中文乱码"}},[e._v("#")]),e._v(" 中文乱码")]),e._v(" "),t("h4",{attrs:{id:"urlencoder解决ie和谷歌"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#urlencoder解决ie和谷歌"}},[e._v("#")]),e._v(" URLEncoder解决IE和谷歌")]),e._v(" "),t("h4",{attrs:{id:"base64解决火狐"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#base64解决火狐"}},[e._v("#")]),e._v(" BASE64解决火狐")]),e._v(" "),t("p",[t("code",[e._v("=?charset?B?xxxxx?=")]),e._v("其中"),t("code",[e._v("xxxx")]),e._v("表示编码后的字符串，"),t("code",[e._v("charset")]),e._v("表示编码，"),t("code",[e._v("B")]),e._v("表示"),t("code",[e._v("BASE64")])])])}),[],!1,null,null,null);t.default=s.exports}}]);