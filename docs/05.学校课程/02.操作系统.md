---
title: 操作系统
date: 2022-01-04 21:45:45
permalink: /pages/78e982/
---
# 操作系统

## 概论

### 概念

#### 定义

管理系统资源、控制程序执行、改善人机界面、提供各种服务，合理组织计算机工作流程和为用户方便而有效地使用计算机提供良好运行环境的最基本的系统软件。

#### 主要目标

+ 方便使用
+ 扩充功能
+ 管理资源
+ 提高效率
+ 开放环境

#### 主要特性

- 共享性
- 并发性
- 虚拟性
- 异步性

### 功能

- 处理器管理（进程管理）
- 存储管理
- 设备管理
- 文件管理

![image-20220104210556230](https://image-cl.oss-cn-nanjing.aliyuncs.com/img/image-20220104210556230.png)

### 流行操作系统

- 安卓
- IOS
- windows
- Unix
- Linux
- HarmonyOS

## 处理器管理

### 功能

- 统计系统中每个作业程序的状态，以便将处理器分配给相关候选程序。
- 指定处理器调度策略，也是挑选待分配候选程序的必须遵循的原则。
- 实施处理器的分配，以便让获得处理器的程序真正投入运行。

### 进程

#### 属性

- 动态性
- 结构性
- 独立性
- 并发性
- 制约性
- 共享性

#### 状态

- 运行态
- 就绪态
- 等待态
- 挂起态

- 新建态
- 终止态

#### 进程控制块

进程控制块（Process Control Block，PCB）是为了描述和控制进程的运行而定义的一种数表结构，它是进程存在的唯一标志，也是进程实体的一部分。操作系统对进程的管理和控制主要以PCB为依据。PCB中包括了操作系统所需要的进程运行的所有信息。

##### 信息

- 标识信息
- 描述信息
- 现场信息
- 管理和控制信息

#### 调度算法（理解）

周转时间=运行结束时间-开始时间

响应比=1+等待时间/需要运行时间

#### 线程

##### 特性

没有挂起态，因为线程并不占有资源

### 并发进程

#### 临界区

临界区就是并发进程中与共享变量有关的程序代码段。

#### 临界区要求

- 不存在有关进程间相对推进速度、系统内有多个CPU 的假定。

- 一次最多只能有一个进程进入临界区，也即没有两个或两个以上的进程能够同时进入临界区，当有一个进程在临界区内，其他想进入临界区的进程必须等待,这一点充分说明了临界区的互斥访问特性。

- ###### 不能让一个进程在临界区内无限制地运行下去，在临界区中的进程必须在有限时间内运行结束而离开临界区。

- 等待进入临界区的进程，在时间上不能被无限推迟。

#### PV操作（理解）

### 管程

#### 定义

管程(Monitor)的基本思路是:将分散在各个进程中的临界区集中起来进行统一控制和管理,并且将系统中的共享资源用数据结构抽象地描述出来。然后对临界区的访问通过“管程”进行统一管理。所谓管程，就是由若干个数据结构、变量以及方法（函数）所组织成的一种特殊的结构,它的形式表现为一种特殊的模块或软件包。进程可以使用管程中的方法，但是不允许直接使用管程中的内部数据结构，管程内部定义的数据结构只可以由它内部所定义的方法（函数）直接访问。

#### 汉森和Hoare

汉森：执行唤醒的人退出管程

Hoare：被唤醒的人退出管程

### 高级通讯

- 管道文件通信
- 共享存储器
- 消息传递

### 死锁

#### 死锁的条件

- 互斥使用资源条件:每一个资源任一时刻只能由一个进程使用，如果进程想申请被其他进程占用的资源，则该进程必须等待。
- 占有且申请资源条件:一个进程占有了资源还需要申请新的资源
- 不可抢夺式分配:一个进程不能从其他进程抢夺资源，一个资源只能由拥有该资源的进程使用完后主动释放。
- 循环等待条件;必然存在着一个进程循环等待链，链中的每一个进程都在等待它前一个进程所占用的资源。

#### 银行家算法

资源分配拒绝

- 安全状态
- 不安全状态
- 死锁状态

## 存储管理

### 功能

- 内存分配和回收
- 内存保护
- 地址映射
- 内存共享
- 内存扩充

#### 重定位

- 静态重定位，地址转换在运行前
  - 优点：简单易实现，运行速度快
  - 缺点：内存必须连续，受限制的，不可移动的

- 动态重定位：地址转化在运行后
  - 优点：内存可以不连续
  - 缺点：运行速度慢

### 分区存储管理

#### 单一连续区

#### 固定分区

#### 可变分区

### 简单分页存储管理

一维存储

#### 二级和多级页表

为了防止页表过大无法存储

### 简单段式存储管理

二维存储

### 请求分页虚拟存储管理

#### 置换算法（理解）

## 设备管理

### 功能

- 缓冲区管理
- 设备分配
- 设备驱动
- 设备独立性和虚拟设备

### IO控制方式

- 程序查询方式
- 中断方式
- DMA方式
- 通道方式
  - CCW:通道命令字
  - CAW：通道地址字
  - CSW:通道状态字

### 缓冲技术

#### 目的

为了解决CPU和IO速度不匹配

#### 类型

- 单缓冲
- 双缓冲
- 多缓冲
- 缓冲池

### 磁盘

柱面号，扇区号，磁头号

#### 调度算法（理解）

### 虚拟设备

#### Spooling技术

CPU和外围设备真正并行工作，这种在联机的情况下实现的外围设备同时操作称为Spooling技术

#### 四种状态

- 输入状态
- 后备状态
- 执行状态
- 完成状态

## 文件管理

### 功能

- 文件的组织方式
- 文件的存取和使用方法
- 文件存储空间的管理
- 文件的目录管理
- 文件的共享性和安全性

### 文件物理结构

- 顺序结构
- 链接结构
- 索引结构
- Hash

#### 存储空间管理

- 连续分配
- 链式分配
- 索引分配

#### 空间管理方法

- 空闲文件目录
- 空闲块表
- 位视图

### 文件的使用

#### 文件的共享

- 静态共享
- 动态共享
- 符号链接共享

#### 文件控制方式

- 存取控制矩阵
- 存取控制表
- 用户权限表
- 口令和编码

#### 文件完整性

- 全量转储
- 增量转储