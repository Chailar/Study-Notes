---
title: Web表单
date: 2021-08-26 17:25:21
permalink: /pages/f4b2f7/
---
# Web表单

## Web表单基础

### HTML表单的构建

#### form元素

所有HTML表单都以一个`<form>`元素开始，这个元素定义了一个表单。

- `action`：在提交表单时,应该把所收集的数据送给谁(/那个模块)(URL)去处理。
- `method`：发送数据的HTTP方法

#### fieldset和legend元素

`<fieldset>`元素是一种方便的用于创建具有相同目的的小部件组的方式，出于样式和语义目的。 你可以在`<fieldset>`开口标签后加上`<legend>`来标签`<fieldset>`。

#### label元素

`<label>`用于定义标签

##### 标签点击

在所有浏览器中单击标签可以激活相应的小部件

##### 多标签

在多个标签的情况下，您应该将一个小部件和它的标签嵌套在一个`<label>`元素中。

### 原生表单部件

#### 通用属性

| 属性名称  | 默认值 |                             描述                             |
| :-------: | :----: | :----------------------------------------------------------: |
| autofocus | false  | 这个布尔属性允许您指定当页面加载时元素应该自动具有输入焦点，除非用户覆盖它。 |
| disabled  | false  |             这个布尔属性表示用户不能与元素交互。             |
|   form    |        |                 小部件与之相关联的表单元素。                 |
|   name    |        | 小部件与之相关联的表单元素。属性值必需是同个文档中的`form`元素的`id`属性。 |
|   value   |        |                             初值                             |

#### 文本输入框

通用规范

- 可以被标记为`readonly`(用户不能修改输入值)甚至是`disabled`(输入值永远不会与表单数据的其余部分一起发送)
- 可以有一个`placeholder`; 这是文本输入框中出现的文本，用来简略描述输入框的目的。
- 可以被限制在`size`(框的物理尺寸) 和`maxlength` (可以输入的最大字符数)。

##### 单行文本框

即`<input>`元素，`type`属性设置为`text`可以创建一个单行文本框

> 单行文本框约束：如果输入带有换行符的文本，浏览器会在发送数据之前删除这些换行符。

###### E-mail地址框

`type`属性设置为`email`可以设置检查电子邮箱的输入框。

> 通过包括`multiple`属性，可以让用户将多个电子邮件地址输入相同的输入(以逗号分隔)。

###### 密码框

`type`属性设置为`password`可以设置输入不可见的密码框。

###### 搜索框

`type`属性设置为`search`可以设置搜索框。

> 通常，搜索框是渲染成圆角的，并且/可能给定一个“x”来清除输入的值。输入的值可以被自动保存用来在同一站点上的多个页面上自动补全。

###### 电话号码栏

`type`属性设置为`tel`可以设置电话号码框。

> 由于各地格式不一样，因此不会进行检查

###### URL栏

`type`属性设置为`url`可以设置网址框。

> 可以检查网址**格式**并且报错

##### 多行文本框

多行文本框用`<textarea>`标记

###### textarea属性

| 属性名 | 默认值 | 描述                                             |
| :----- | :----- | :----------------------------------------------- |
| `cols` | `20`   | 文本控件的可见宽度，平均字符宽度。               |
| `rows` |        | 控制的可见文本行数。                             |
| `wrap` | `soft` | 控件是如何包装文本的。可能的值：`hard` 或 `soft` |

> `<input>`为空元素，`<textarea>`是常规元素

#### 下拉框

##### 选择框

选择框用`<select>`元素创建，由`<option>`元素作为子元素。在

`<option>`元素上增加`selected`属性可以设置默认值，也可嵌套`<optgroup>`元素创建关联的组值。

如果`<option>`属性设置`value`属性，则会发送此值，否则发送选择框的值

在`<optgroup>`中，`label`属性显示在值之前，但即使它看起来有点像一个选项，它也不是可选的。

##### 多选框 

在`<select>`元素中添加`multiple`属性，可以设置多选框。

##### 自动补全输入框

用`<datalist>`元素为表单提供建议值，并且用`<option>`指定显示的值。然后用`list`属性将数据列表绑定到文本框。

#### 可选中项

可选中项是可以通过单击它们来更改状态的小部件。两者都使用`checked`属性，以指示该部件的默认状态: "选中"或"未选中"。

##### 复选框

使用`type`属性值为`checkbox`的`<input>`元素来创建复选框

##### 单选按钮

使用`type`属性值为`radio`的`<input>`元素来创建单选按钮

通过将`name`属性共享同一值来使他们成为一组。

#### 按钮

##### Submit

将表单数据发送到服务器，即发送到`<form>`的`action`。

##### Reset

将表单小部件重新设置为默认值。

##### Anonymous

没有自动生效的按钮，但是可以使用JavaScript代码进行定制。



使用`<button>`和`<input>`元素创建按钮，并且用`type`指定按钮类型。

#### 高级表单组件

##### 数字

使用`type`属性为`number` `<input>`的元素创建数字组件。

- 用`min`和`max`来约束数字输入框的大小
- 用`step`属性来指定增加和减少按钮更改小部件的步进值大小

##### 滑块

使用`type`属性为`range` `<input>`的元素创建滑块组件。

> 同`number`有各属性

##### 日期时间选择器

###### 本地时间

设置`<input>`的`type`为`datetime-local`

###### 月

设置`<input>`的`type`为`month`

###### 时间

设置`<input>`的`type`为`time`

###### 星期

设置`<input>`的`type`为`week`

> 以上都可以用`min`和`max`约束

##### 拾色器

设置`<input>`的`type`为`color`创建颜色部件

##### 其他部件

###### 文件选择器

设置`<input>`的`type`为`file`创建文件选择部件。被接受的文件类型可以使用`accept`属性来约束。如果您想让用户选择多个文件，那么可以通过添加`multiple`属性来实现。

###### 隐藏内容

对于发送但不显示给用户的数据，可以设置`<input>`的属性为`hidden`。

###### 图像按钮

图像按钮是使用`type`属性值设置为`image` `<input>`的元素创建的。

> 如果使用图像按钮来提交表单，这个小部件不会提交它的值；相反，提交的是在图像上单击处的X和Y坐标(坐标是相对于图像的，这意味着图像的左上角表示坐标0，0)，坐标被发送为两个键/值对。

###### 进度条

进度条由`<progress>`元素创建，进度条最大值由`max`属性指定。

###### 仪表

仪表表示一个固定值，此值由`min`和`max`界定，由`<meter>`创建。

### 表单数据验证

表单验证即是当向 Web 应用输入数据时，应用会验证输入的数据是否是正确的。

- **客户端校验**发生在浏览器端，表单数据被提交到服务器之前，可以进一步分为
  - **JavaScript** 校验，是可以完全自定义的实现方式；
  - HTML5 **内置校验**，这不需要 JavaScript ，而且性能更好，但是不能像JavaScript那样可自定义。

- **服务器端校验**则是发生在浏览器提交数据并被服务器端程序接收之后 —— 通常服务器端校验都是发生在将数据写入数据库之前。

#### 内置表单数据校验

HTML5可以通过表单元素的校验属性实现表单数据的校验。

- 当元素通过校验时，可以用伪类`:valid`进行格式化

- 当元素未通过校验时，可以用伪类`:invalid`进行格式化

##### input元素的校验约束

###### `required`属性

`required`属性可以使得输入成为必需的。

###### 正则表达式校验

`pattern`属性可以用来校验，用正则表达式作为`value`值。

###### 限制输入长度

所有文本框都可以用`minlength`和`maxlength`来限制输入长度。

#### 使用JavaScript校验

### 发送表单数据

#### 客户端/服务端结构

##### 客户端：发送数据

###### action属性

这个属性定义了发送数据要去的位置。它的值必须是一个有效的URL。如果没有提供此属性，则数据将被发送到包含这个表单的页面的URL。

###### method属性

该属性定义了如何发送数据。

- GET方法：浏览器使用的方法，请求服务器返回给定的资源。
- POST方法：浏览器在询问响应时使用与服务器通信的方法

##### 服务端：检索数据

无论选择哪种HTTP方法，服务器都会接收一个字符串并解析，以便将数据作为键/值对序列获取。

###### 发送数据失败的原因

- 表单项没有name属性值
- 单选、复选（下拉列表中的option标签）都需要添加value属性，以便发送给服务器
- 表单项不在提交的form标签中

#### 特殊案例：发送文件

##### `enctype`属性

该属性允许您指定在提交表单时所生成的请求中的`Content-Type`的HTTP数据头的值。这个数据头告诉服务器正在发送什么样的数据。默认情况下，它的值是`application/x-www-form-urlencoded`：“已编码为URL参数的表单数据”。

##### 发送文件步骤

- 设置`method`为`POST`
- 设置`enctype`为`multipart/form-data`，因为数据将被分成多个部分，每个文件单独占用一个部分，表单正文中包含的文本数据（如果文本也输入到表单中）占用一个部分。
- 包含`File picker`组件，允许用户选择将要上传的文件，

## Web表单进阶

### 构建表单工具

### 使用 JavaScript 发送表单

